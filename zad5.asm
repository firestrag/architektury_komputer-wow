;************************************************************
extern printf;												*
extern scanf;												*
;************************************************************

;************************************************************
section .text;												*
;-----------------------------------------------------------*
global main;												*
main:;														*
	call _pobierz;											*
	call _licz;												*
	xor rax, rax;											*
	mov eax, [suma];										*
	call _wypisz;											*
	jmp _exit;												*
;************************************************************

;************************************************************
_licz:;														*
	xor rax, rax;											*
	xor rbx, rbx;											*
	mov eax, [ilosc];										*
	mov ebx, [suma];										*
	add ebx, eax;											*
	mov [suma], ebx;										*
	dec eax;												*
	mov [ilosc], eax;										*
	cmp eax, 0;												*
	jne _licz;												*
	ret;													*
;************************************************************

;************************************************************
_pobierz:;													*
	xor rax, rax;											*
	mov rsi, ilosc;											*
	mov rdi, format_in;										*
	call scanf;												*
	ret;													*
;************************************************************

;************************************************************
; rax - liczba do wypisania(wartość)			 			*
;-----------------------------------------------------------*	
_wypisz:;													*
	mov rsi, rax;											*
	mov rdi, format_out;									*
	xor rax, rax;											*
	call printf;											*
	ret;													*
;************************************************************

;************************************************************
_exit:;														*
	mov rax, 1;												*
	mov rbx, 0;												*
	int 80h;												*
;************************************************************

;************************************************************
section .data;												*
;-----------------------------------------------------------*
	ilosc:	dd 0;											*
	suma:	dd	0;											*
	format_out:	db	'%d',10,0;								*
	format_in:	db	'%d',0;									*
;************************************************************

